This file is a merged representation of the entire codebase, combining all repository files into a single document.
Generated by Repomix on: 2025-02-02T18:48:22.590Z

================================================================
File Summary
================================================================

Purpose:
--------
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

File Format:
------------
The content is organized as follows:
1. This summary section
2. Repository information
3. Repository structure
4. Multiple file entries, each consisting of:
  a. A separator line (================)
  b. The file path (File: path/to/file)
  c. Another separator line
  d. The full contents of the file
  e. A blank line

Usage Guidelines:
-----------------
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

Notes:
------
- Some files may have been excluded based on .gitignore rules and Repomix's
  configuration.
- Binary files are not included in this packed representation. Please refer to
  the Repository Structure section for a complete list of file paths, including
  binary files.

Additional Info:
----------------

For more information about Repomix, visit: https://github.com/yamadashy/repomix

================================================================
Repository Structure
================================================================
src/
  main/
    java/
      acceso/
        datos/
          config/
            DatabaseConfig.java
            DatabaseConfigFactory.java
            DatabaseProperties.java
            DatabaseType.java
            SQLiteConfig.java
          dao/
            impl/
              sqlite/
                SQLiteClienteDAO.java
                SQLitePedidoDAO.java
                SQLiteZonaEnvioDAO.java
            interfaces/
              ClienteDAO.java
              PedidoDAO.java
              ZonaEnvioDAO.java
          factory/
            DAOFactory.java
            SQLiteDAOFactory.java
          model/
            Cliente.java
            Pedido.java
            ZonaEnvio.java
          ui/
            ConsoleUI.java
            GraphicalUI.java
            SwingMenuBuilder.java
            UI.java
          util/
            DatabaseException.java
            QueryUtils.java
          Main.java
    resources/
      pedidos.sql
pom.xml

================================================================
Repository Files
================================================================

================
File: src/main/java/acceso/datos/config/DatabaseConfig.java
================
package acceso.datos.config;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.SQLException;

public interface DatabaseConfig {
    // Métodos principales que toda configuración debe implementar
    Connection getConnection() throws SQLException;
    DataSource getDataSource();
    void closePool();
    
    // Propiedades básicas que toda base de datos necesita
    String getUrl();
    String getUsername();
    String getPassword();
    int getMaxPoolSize();
    int getMinPoolSize();
    
    // Método de fábrica estático
    static DatabaseConfig forType(DatabaseType type, String url, String username, String password) {
        return switch (type) {
            case SQLITE -> new SQLiteConfig(url);
            case MYSQL -> throw new UnsupportedOperationException("MySQL not implemented yet");
            case POSTGRESQL -> throw new UnsupportedOperationException("PostgreSQL not implemented yet");
        };
    }
}

================
File: src/main/java/acceso/datos/config/DatabaseConfigFactory.java
================
package acceso.datos.config;

public class DatabaseConfigFactory {
    public static DatabaseConfig createConfig(DatabaseType type, DatabaseProperties properties) {
        return switch (type) {
            case SQLITE -> createSQLiteConfig(properties);
            case MYSQL -> createMySQLConfig(properties);
            case POSTGRESQL -> createPostgreSQLConfig(properties);
        };
    }

    private static DatabaseConfig createSQLiteConfig(DatabaseProperties properties) {
        return new SQLiteConfig(properties.getUrl());
    }

    private static DatabaseConfig createMySQLConfig(DatabaseProperties properties) {
        throw new UnsupportedOperationException("MySQL not implemented yet");
    }

    private static DatabaseConfig createPostgreSQLConfig(DatabaseProperties properties) {
        throw new UnsupportedOperationException("PostgreSQL not implemented yet");
    }
}

================
File: src/main/java/acceso/datos/config/DatabaseProperties.java
================
package acceso.datos.config;

public class DatabaseProperties {
    private final String url;
    private final String username;
    private final String password;
    private final int maxPoolSize;
    private final int minPoolSize;

    private DatabaseProperties(Builder builder) {
        this.url = builder.url;
        this.username = builder.username;
        this.password = builder.password;
        this.maxPoolSize = builder.maxPoolSize;
        this.minPoolSize = builder.minPoolSize;
    }

    // Getters
    public String getUrl() { return url; }
    public String getUsername() { return username; }
    public String getPassword() { return password; }
    public int getMaxPoolSize() { return maxPoolSize; }
    public int getMinPoolSize() { return minPoolSize; }

    // Builder pattern
    public static class Builder {
        private String url;
        private String username = "";
        private String password = "";
        private int maxPoolSize = 10;
        private int minPoolSize = 1;

        public Builder url(String url) {
            this.url = url;
            return this;
        }

        public Builder username(String username) {
            this.username = username;
            return this;
        }

        public Builder password(String password) {
            this.password = password;
            return this;
        }

        public Builder maxPoolSize(int maxPoolSize) {
            this.maxPoolSize = maxPoolSize;
            return this;
        }

        public Builder minPoolSize(int minPoolSize) {
            this.minPoolSize = minPoolSize;
            return this;
        }

        public DatabaseProperties build() {
            if (url == null || url.isEmpty()) {
                throw new IllegalStateException("URL is required");
            }
            return new DatabaseProperties(this);
        }
    }
}

================
File: src/main/java/acceso/datos/config/DatabaseType.java
================
package acceso.datos.config;

public enum DatabaseType {
    SQLITE,
    MYSQL,
    POSTGRESQL
}

================
File: src/main/java/acceso/datos/config/SQLiteConfig.java
================
package acceso.datos.config;

import com.zaxxer.hikari.HikariConfig;
import com.zaxxer.hikari.HikariDataSource;

import acceso.datos.util.DatabaseException;

import javax.sql.DataSource;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.sql.Connection;
import java.sql.SQLException;
import java.sql.Statement;

public class SQLiteConfig implements DatabaseConfig {
    private static final int DEFAULT_MAX_POOL_SIZE = 10;
    private static final int DEFAULT_MIN_POOL_SIZE = 1;
    private final String url;
    private HikariDataSource dataSource;

    public SQLiteConfig(String url) {
        this.url = url;
        initializeDataSource();
    }

private void initializeDataSource() {
    HikariConfig config = new HikariConfig();
    config.setJdbcUrl("jdbc:sqlite:" + url);
    config.setMaximumPoolSize(DEFAULT_MAX_POOL_SIZE);
    config.setMinimumIdle(DEFAULT_MIN_POOL_SIZE);
    config.setAutoCommit(true);
    
    // Configuraciones específicas de SQLite
    config.addDataSourceProperty("foreign_keys", "true");
    config.addDataSourceProperty("synchronous", "normal");
    config.addDataSourceProperty("journal_mode", "WAL");
    
    dataSource = new HikariDataSource(config);

    // Inicializar base de datos
    initializeDatabase();
}

private void initializeDatabase() {
    try (Connection conn = dataSource.getConnection();
         Statement stmt = conn.createStatement()) {
        
        // Leer el contenido del script SQL
        String sqlScript = new String(Files.readAllBytes(Paths.get("src/main/resources/pedidos.sql")));
        
        // Dividir el script en sentencias individuales
        String[] statements = sqlScript.split(";");
        
        for (String statement : statements) {
            statement = statement.trim();
            if (!statement.isEmpty()) {
                try {
                    // Añadir IF NOT EXISTS o usar operaciones que no fallen si ya existen
                    if (statement.startsWith("CREATE TABLE")) {
                        statement = statement.replace("CREATE TABLE", "CREATE TABLE IF NOT EXISTS");
                    }
                    stmt.execute(statement);
                } catch (SQLException e) {
                    // Ignorar errores de tablas ya existentes
                    System.out.println("Advertencia: " + e.getMessage());
                }
            }
        }
    } catch (SQLException | IOException e) {
        throw new DatabaseException("Error inicializando base de datos", e);
    }
}

    @Override
    public Connection getConnection() throws SQLException {
        return dataSource.getConnection();
    }

    @Override
    public DataSource getDataSource() {
        return dataSource;
    }

    @Override
    public void closePool() {
        if (dataSource != null && !dataSource.isClosed()) {
            dataSource.close();
        }
    }

    @Override
    public String getUrl() {
        return url;
    }

    @Override
    public String getUsername() {
        return ""; // SQLite no usa autenticación
    }

    @Override
    public String getPassword() {
        return ""; // SQLite no usa autenticación
    }

    @Override
    public int getMaxPoolSize() {
        return DEFAULT_MAX_POOL_SIZE;
    }

    @Override
    public int getMinPoolSize() {
        return DEFAULT_MIN_POOL_SIZE;
    }
}

================
File: src/main/java/acceso/datos/dao/impl/sqlite/SQLiteClienteDAO.java
================
package acceso.datos.dao.impl.sqlite;

import acceso.datos.config.DatabaseConfig;
import acceso.datos.dao.interfaces.ClienteDAO;
import acceso.datos.model.Cliente;
import acceso.datos.util.DatabaseException;
import acceso.datos.util.QueryUtils;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class SQLiteClienteDAO implements ClienteDAO {
    private final DatabaseConfig databaseConfig;

    public SQLiteClienteDAO(DatabaseConfig databaseConfig) {
        this.databaseConfig = databaseConfig;
    }

    @Override
    public void insert(Cliente cliente) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.INSERT_CLIENTE, 
                     Statement.RETURN_GENERATED_KEYS)) {
            
            stmt.setString(1, cliente.getNombre());
            stmt.setString(2, cliente.getEmail());
            stmt.setString(3, cliente.getTelefono());
            stmt.setInt(4, cliente.getIdZona());
            
            int affectedRows = stmt.executeUpdate();
            if (affectedRows == 0) {
                throw new DatabaseException("La creación del cliente falló, ninguna fila afectada.");
            }

            try (ResultSet generatedKeys = stmt.getGeneratedKeys()) {
                if (generatedKeys.next()) {
                    cliente.setIdCliente(generatedKeys.getInt(1));
                } else {
                    throw new DatabaseException("La creación del cliente falló, no se obtuvo el ID.");
                }
            }
        }
    }

    @Override
    public Cliente getById(int id) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.SELECT_CLIENTE_BY_ID)) {
            
            stmt.setInt(1, id);
            
            try (ResultSet rs = stmt.executeQuery()) {
                if (rs.next()) {
                    return extractClienteFromResultSet(rs);
                }
            }
        }
        return null;
    }

    @Override
    public List<Cliente> getAll() throws SQLException {
        List<Cliente> clientes = new ArrayList<>();
        
        try (Connection conn = databaseConfig.getConnection();
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery(QueryUtils.SELECT_ALL_CLIENTES)) {
            
            while (rs.next()) {
                clientes.add(extractClienteFromResultSet(rs));
            }
        }
        
        return clientes;
    }

    @Override
    public void update(Cliente cliente) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.UPDATE_CLIENTE)) {
            
            stmt.setString(1, cliente.getNombre());
            stmt.setString(2, cliente.getEmail());
            stmt.setString(3, cliente.getTelefono());
            stmt.setInt(4, cliente.getIdZona());
            stmt.setInt(5, cliente.getIdCliente());
            
            int affectedRows = stmt.executeUpdate();
            if (affectedRows == 0) {
                throw new DatabaseException("La actualización del cliente falló, ninguna fila afectada.");
            }
        }
    }

    @Override
    public void delete(int id) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.DELETE_CLIENTE)) {
            
            stmt.setInt(1, id);
            
            int affectedRows = stmt.executeUpdate();
            if (affectedRows == 0) {
                throw new DatabaseException("El borrado del cliente falló, ninguna fila afectada.");
            }
        }
    }

    @Override
    public List<Cliente> getClientesByZona(int idZona) throws SQLException {
        List<Cliente> clientes = new ArrayList<>();
        
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.SELECT_CLIENTES_BY_ZONA)) {
            
            stmt.setInt(1, idZona);
            
            try (ResultSet rs = stmt.executeQuery()) {
                while (rs.next()) {
                    clientes.add(extractClienteFromResultSet(rs));
                }
            }
        }
        
        return clientes;
    }

    @Override
    public double getTotalGastadoPorCliente(int idCliente) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.SELECT_TOTAL_CLIENTE)) {
            
            stmt.setInt(1, idCliente);
            
            try (ResultSet rs = stmt.executeQuery()) {
                if (rs.next()) {
                    return rs.getDouble("total");
                }
            }
        }
        return 0.0;
    }

    // Método auxiliar para extraer un cliente de un ResultSet
    private Cliente extractClienteFromResultSet(ResultSet rs) throws SQLException {
        Cliente cliente = new Cliente();
        cliente.setIdCliente(rs.getInt("id_cliente"));
        cliente.setNombre(rs.getString("nombre"));
        cliente.setEmail(rs.getString("email"));
        cliente.setTelefono(rs.getString("telefono"));
        cliente.setIdZona(rs.getInt("id_zona"));
        return cliente;
    }
}

================
File: src/main/java/acceso/datos/dao/impl/sqlite/SQLitePedidoDAO.java
================
package acceso.datos.dao.impl.sqlite;

import acceso.datos.config.DatabaseConfig;
import acceso.datos.dao.interfaces.PedidoDAO;
import acceso.datos.model.Pedido;
import acceso.datos.util.DatabaseException;
import acceso.datos.util.QueryUtils;

import java.sql.*;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;

public class SQLitePedidoDAO implements PedidoDAO {
    private final DatabaseConfig databaseConfig;

    public SQLitePedidoDAO(DatabaseConfig databaseConfig) {
        this.databaseConfig = databaseConfig;
    }

    @Override
    public void insert(Pedido pedido) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.INSERT_PEDIDO, 
                     Statement.RETURN_GENERATED_KEYS)) {
            
            stmt.setDate(1, Date.valueOf(pedido.getFecha()));
            stmt.setDouble(2, pedido.getImporteTotal());
            stmt.setInt(3, pedido.getIdCliente());
            
            int affectedRows = stmt.executeUpdate();
            if (affectedRows == 0) {
                throw new DatabaseException("La creación del pedido falló, ninguna fila afectada.");
            }

            try (ResultSet generatedKeys = stmt.getGeneratedKeys()) {
                if (generatedKeys.next()) {
                    pedido.setIdPedido(generatedKeys.getInt(1));
                } else {
                    throw new DatabaseException("La creación del pedido falló, no se obtuvo el ID.");
                }
            }
        }
    }

    @Override
    public Pedido getById(int id) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.SELECT_PEDIDO_BY_ID)) {
            
            stmt.setInt(1, id);
            
            try (ResultSet rs = stmt.executeQuery()) {
                if (rs.next()) {
                    return extractPedidoFromResultSet(rs);
                }
            }
        }
        return null;
    }

    @Override
    public List<Pedido> getAll() throws SQLException {
        List<Pedido> pedidos = new ArrayList<>();
        
        try (Connection conn = databaseConfig.getConnection();
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery(QueryUtils.SELECT_ALL_PEDIDOS)) {
            
            while (rs.next()) {
                pedidos.add(extractPedidoFromResultSet(rs));
            }
        }
        
        return pedidos;
    }

    @Override
    public void update(Pedido pedido) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.UPDATE_PEDIDO)) {
            
            stmt.setDate(1, Date.valueOf(pedido.getFecha()));
            stmt.setDouble(2, pedido.getImporteTotal());
            stmt.setInt(3, pedido.getIdCliente());
            stmt.setInt(4, pedido.getIdPedido());
            
            int affectedRows = stmt.executeUpdate();
            if (affectedRows == 0) {
                throw new DatabaseException("La actualización del pedido falló, ninguna fila afectada.");
            }
        }
    }

    @Override
    public void delete(int id) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.DELETE_PEDIDO)) {
            
            stmt.setInt(1, id);
            
            int affectedRows = stmt.executeUpdate();
            if (affectedRows == 0) {
                throw new DatabaseException("El borrado del pedido falló, ninguna fila afectada.");
            }
        }
    }

    @Override
    public List<Pedido> getPedidosByCliente(int idCliente) throws SQLException {
        List<Pedido> pedidos = new ArrayList<>();
        
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.SELECT_PEDIDOS_BY_CLIENTE)) {
            
            stmt.setInt(1, idCliente);
            
            try (ResultSet rs = stmt.executeQuery()) {
                while (rs.next()) {
                    pedidos.add(extractPedidoFromResultSet(rs));
                }
            }
        }
        
        return pedidos;
    }

    @Override
    public List<Pedido> getPedidosByFecha(LocalDate fecha) throws SQLException {
        List<Pedido> pedidos = new ArrayList<>();
        
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.SELECT_PEDIDOS_BY_FECHA)) {
            
            stmt.setDate(1, Date.valueOf(fecha));
            
            try (ResultSet rs = stmt.executeQuery()) {
                while (rs.next()) {
                    pedidos.add(extractPedidoFromResultSet(rs));
                }
            }
        }
        
        return pedidos;
    }

    @Override
    public double getTotalPedidosByCliente(int idCliente) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(
                 "SELECT SUM(importe_total) as total FROM Pedidos WHERE id_cliente = ?")) {
            
            stmt.setInt(1, idCliente);
            
            try (ResultSet rs = stmt.executeQuery()) {
                if (rs.next()) {
                    return rs.getDouble("total");
                }
            }
        }
        return 0.0;
    }

    // Método auxiliar para extraer un pedido de un ResultSet
    private Pedido extractPedidoFromResultSet(ResultSet rs) throws SQLException {
        Pedido pedido = new Pedido();
        pedido.setIdPedido(rs.getInt("id_pedido"));
        pedido.setFecha(rs.getDate("fecha").toLocalDate());
        pedido.setImporteTotal(rs.getDouble("importe_total"));
        pedido.setIdCliente(rs.getInt("id_cliente"));
        return pedido;
    }
}

================
File: src/main/java/acceso/datos/dao/impl/sqlite/SQLiteZonaEnvioDAO.java
================
package acceso.datos.dao.impl.sqlite;

import acceso.datos.config.DatabaseConfig;
import acceso.datos.dao.interfaces.ZonaEnvioDAO;
import acceso.datos.model.ZonaEnvio;
import acceso.datos.util.DatabaseException;
import acceso.datos.util.QueryUtils;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class SQLiteZonaEnvioDAO implements ZonaEnvioDAO {
    private final DatabaseConfig databaseConfig;

    public SQLiteZonaEnvioDAO(DatabaseConfig databaseConfig) {
        this.databaseConfig = databaseConfig;
    }

    @Override
    public void insert(ZonaEnvio zonaEnvio) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.INSERT_ZONA, 
                     Statement.RETURN_GENERATED_KEYS)) {
            
            stmt.setString(1, zonaEnvio.getNombreZona());
            stmt.setDouble(2, zonaEnvio.getTarifaEnvio());
            
            int affectedRows = stmt.executeUpdate();
            if (affectedRows == 0) {
                throw new DatabaseException("La creación de la zona falló, ninguna fila afectada.");
            }

            try (ResultSet generatedKeys = stmt.getGeneratedKeys()) {
                if (generatedKeys.next()) {
                    zonaEnvio.setIdZona(generatedKeys.getInt(1));
                } else {
                    throw new DatabaseException("La creación de la zona falló, no se obtuvo el ID.");
                }
            }
        }
    }

    @Override
    public ZonaEnvio getById(int id) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.SELECT_ZONA_BY_ID)) {
            
            stmt.setInt(1, id);
            
            try (ResultSet rs = stmt.executeQuery()) {
                if (rs.next()) {
                    return extractZonaFromResultSet(rs);
                }
            }
        }
        return null;
    }

    @Override
    public List<ZonaEnvio> getAll() throws SQLException {
        List<ZonaEnvio> zonas = new ArrayList<>();
        
        try (Connection conn = databaseConfig.getConnection();
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery(QueryUtils.SELECT_ALL_ZONAS)) {
            
            while (rs.next()) {
                zonas.add(extractZonaFromResultSet(rs));
            }
        }
        
        return zonas;
    }

    @Override
    public void update(ZonaEnvio zonaEnvio) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.UPDATE_ZONA)) {
            
            stmt.setString(1, zonaEnvio.getNombreZona());
            stmt.setDouble(2, zonaEnvio.getTarifaEnvio());
            stmt.setInt(3, zonaEnvio.getIdZona());
            
            int affectedRows = stmt.executeUpdate();
            if (affectedRows == 0) {
                throw new DatabaseException("La actualización de la zona falló, ninguna fila afectada.");
            }
        }
    }

    @Override
    public void delete(int id) throws SQLException {
        try (Connection conn = databaseConfig.getConnection();
             PreparedStatement stmt = conn.prepareStatement(QueryUtils.DELETE_ZONA)) {
            
            stmt.setInt(1, id);
            
            int affectedRows = stmt.executeUpdate();
            if (affectedRows == 0) {
                throw new DatabaseException("El borrado de la zona falló, ninguna fila afectada.");
            }
        }
    }

    // Método auxiliar para extraer una zona de un ResultSet
    private ZonaEnvio extractZonaFromResultSet(ResultSet rs) throws SQLException {
        ZonaEnvio zona = new ZonaEnvio();
        zona.setIdZona(rs.getInt("id_zona"));
        zona.setNombreZona(rs.getString("nombre_zona"));
        zona.setTarifaEnvio(rs.getDouble("tarifa_envio"));
        return zona;
    }
}

================
File: src/main/java/acceso/datos/dao/interfaces/ClienteDAO.java
================
package acceso.datos.dao.interfaces;

import acceso.datos.model.Cliente;
import java.sql.SQLException;
import java.util.List;

public interface ClienteDAO {
    // Operaciones CRUD básicas
    void insert(Cliente cliente) throws SQLException;
    Cliente getById(int id) throws SQLException;
    List<Cliente> getAll() throws SQLException;
    void update(Cliente cliente) throws SQLException;
    void delete(int id) throws SQLException;
    
    // Operaciones específicas
    List<Cliente> getClientesByZona(int idZona) throws SQLException;
    double getTotalGastadoPorCliente(int idCliente) throws SQLException;
}

================
File: src/main/java/acceso/datos/dao/interfaces/PedidoDAO.java
================
package acceso.datos.dao.interfaces;

import acceso.datos.model.Pedido;
import java.sql.SQLException;
import java.util.List;
import java.time.LocalDate;

public interface PedidoDAO {
    // Operaciones CRUD básicas
    void insert(Pedido pedido) throws SQLException;
    Pedido getById(int id) throws SQLException;
    List<Pedido> getAll() throws SQLException;
    void update(Pedido pedido) throws SQLException;
    void delete(int id) throws SQLException;
    
    // Operaciones específicas
    List<Pedido> getPedidosByCliente(int idCliente) throws SQLException;
    List<Pedido> getPedidosByFecha(LocalDate fecha) throws SQLException;
    double getTotalPedidosByCliente(int idCliente) throws SQLException;
}

================
File: src/main/java/acceso/datos/dao/interfaces/ZonaEnvioDAO.java
================
package acceso.datos.dao.interfaces;

import acceso.datos.model.ZonaEnvio;
import java.sql.SQLException;
import java.util.List;

public interface ZonaEnvioDAO {
    // Operaciones CRUD básicas
    void insert(ZonaEnvio zonaEnvio) throws SQLException;
    ZonaEnvio getById(int id) throws SQLException;
    List<ZonaEnvio> getAll() throws SQLException;
    void update(ZonaEnvio zonaEnvio) throws SQLException;
    void delete(int id) throws SQLException;
}

================
File: src/main/java/acceso/datos/factory/DAOFactory.java
================
package acceso.datos.factory;

import acceso.datos.config.DatabaseConfig;
import acceso.datos.config.DatabaseType;
import acceso.datos.dao.interfaces.ClienteDAO;
import acceso.datos.dao.interfaces.PedidoDAO;
import acceso.datos.dao.interfaces.ZonaEnvioDAO;

public abstract class DAOFactory {
    protected DatabaseConfig databaseConfig;

    protected DAOFactory(DatabaseConfig databaseConfig) {
        this.databaseConfig = databaseConfig;
    }

    public static DAOFactory getDAOFactory(DatabaseType dbType, DatabaseConfig config) {
        return switch (dbType) {
            case SQLITE -> new SQLiteDAOFactory(config);
            case MYSQL -> throw new UnsupportedOperationException("MySQL no implementado aún");
            case POSTGRESQL -> throw new UnsupportedOperationException("PostgreSQL no implementado aún");
        };
    }

    // Métodos abstractos para crear los DAOs
    public abstract ClienteDAO createClienteDAO();
    public abstract PedidoDAO createPedidoDAO();
    public abstract ZonaEnvioDAO createZonaEnvioDAO();
}

================
File: src/main/java/acceso/datos/factory/SQLiteDAOFactory.java
================
package acceso.datos.factory;

import acceso.datos.dao.interfaces.ClienteDAO;
import acceso.datos.dao.interfaces.PedidoDAO;
import acceso.datos.dao.interfaces.ZonaEnvioDAO;
import acceso.datos.config.DatabaseConfig;
import acceso.datos.dao.impl.sqlite.SQLiteClienteDAO;
import acceso.datos.dao.impl.sqlite.SQLitePedidoDAO;
import acceso.datos.dao.impl.sqlite.SQLiteZonaEnvioDAO;

public class SQLiteDAOFactory extends DAOFactory {

    public SQLiteDAOFactory(DatabaseConfig databaseConfig) {
        super(databaseConfig);
    }

    @Override
    public ClienteDAO createClienteDAO() {
        return new SQLiteClienteDAO(databaseConfig);
    }

    @Override
    public PedidoDAO createPedidoDAO() {
        return new SQLitePedidoDAO(databaseConfig);
    }

    @Override
    public ZonaEnvioDAO createZonaEnvioDAO() {
        return new SQLiteZonaEnvioDAO(databaseConfig);
    }
}

================
File: src/main/java/acceso/datos/model/Cliente.java
================
package acceso.datos.model;

public class Cliente {
    private int idCliente;
    private String nombre;
    private String email;
    private String telefono;
    private int idZona;

    // Constructor completo
    public Cliente(int idCliente, String nombre, String email, String telefono, int idZona) {
        this.idCliente = idCliente;
        this.nombre = nombre;
        this.email = email;
        this.telefono = telefono;
        this.idZona = idZona;
    }

    // Constructor vacío
    public Cliente() {}

    // Getters y setters
    public int getIdCliente() {
        return idCliente;
    }

    public void setIdCliente(int idCliente) {
        this.idCliente = idCliente;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getTelefono() {
        return telefono;
    }

    public void setTelefono(String telefono) {
        this.telefono = telefono;
    }

    public int getIdZona() {
        return idZona;
    }

    public void setIdZona(int idZona) {
        this.idZona = idZona;
    }

    @Override
    public String toString() {
        return "Cliente{" +
                "idCliente=" + idCliente +
                ", nombre='" + nombre + '\'' +
                ", email='" + email + '\'' +
                ", telefono='" + telefono + '\'' +
                ", idZona=" + idZona +
                '}';
    }
}

================
File: src/main/java/acceso/datos/model/Pedido.java
================
package acceso.datos.model;

import java.time.LocalDate;

public class Pedido {
    private int idPedido;
    private LocalDate fecha;
    private double importeTotal;
    private int idCliente;

    // Constructor completo
    public Pedido(int idPedido, LocalDate fecha, double importeTotal, int idCliente) {
        this.idPedido = idPedido;
        this.fecha = fecha;
        this.importeTotal = importeTotal;
        this.idCliente = idCliente;
    }

    // Constructor vacío
    public Pedido() {}

    // Getters y setters
    public int getIdPedido() {
        return idPedido;
    }

    public void setIdPedido(int idPedido) {
        this.idPedido = idPedido;
    }

    public LocalDate getFecha() {
        return fecha;
    }

    public void setFecha(LocalDate fecha) {
        this.fecha = fecha;
    }

    public double getImporteTotal() {
        return importeTotal;
    }

    public void setImporteTotal(double importeTotal) {
        this.importeTotal = importeTotal;
    }

    public int getIdCliente() {
        return idCliente;
    }

    public void setIdCliente(int idCliente) {
        this.idCliente = idCliente;
    }

    @Override
    public String toString() {
        return "Pedido{" +
                "idPedido=" + idPedido +
                ", fecha=" + fecha +
                ", importeTotal=" + importeTotal +
                ", idCliente=" + idCliente +
                '}';
    }
}

================
File: src/main/java/acceso/datos/model/ZonaEnvio.java
================
package acceso.datos.model;

public class ZonaEnvio {
    private int idZona;
    private String nombreZona;
    private double tarifaEnvio;

    // Constructor
    public ZonaEnvio(int idZona, String nombreZona, double tarifaEnvio) {
        this.idZona = idZona;
        this.nombreZona = nombreZona;
        this.tarifaEnvio = tarifaEnvio;
    }

    // Constructor vacío
    public ZonaEnvio() {}

    // Getters y setters
    public int getIdZona() {
        return idZona;
    }

    public void setIdZona(int idZona) {
        this.idZona = idZona;
    }

    public String getNombreZona() {
        return nombreZona;
    }

    public void setNombreZona(String nombreZona) {
        this.nombreZona = nombreZona;
    }

    public double getTarifaEnvio() {
        return tarifaEnvio;
    }

    public void setTarifaEnvio(double tarifaEnvio) {
        this.tarifaEnvio = tarifaEnvio;
    }

    @Override
    public String toString() {
        return "ZonaEnvio{" +
                "idZona=" + idZona +
                ", nombreZona='" + nombreZona + '\'' +
                ", tarifaEnvio=" + tarifaEnvio +
                '}';
    }
}

================
File: src/main/java/acceso/datos/ui/ConsoleUI.java
================
package acceso.datos.ui;

import acceso.datos.dao.interfaces.ClienteDAO;
import acceso.datos.dao.interfaces.PedidoDAO;
import acceso.datos.dao.interfaces.ZonaEnvioDAO;
import acceso.datos.model.Cliente;
import acceso.datos.model.Pedido;
import acceso.datos.model.ZonaEnvio;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.List;
import java.util.Scanner;

public class ConsoleUI implements UI {
    private final Scanner scanner;
    private final ClienteDAO clienteDAO;
    private final PedidoDAO pedidoDAO;
    private final ZonaEnvioDAO zonaEnvioDAO;
    private static final DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern("dd/MM/yyyy");

    public ConsoleUI(ClienteDAO clienteDAO, PedidoDAO pedidoDAO, ZonaEnvioDAO zonaEnvioDAO) {
        this.scanner = new Scanner(System.in);
        this.clienteDAO = clienteDAO;
        this.pedidoDAO = pedidoDAO;
        this.zonaEnvioDAO = zonaEnvioDAO;
    }

    @Override
    public void iniciar() {
        boolean salir = false;
        while (!salir) {
            int opcion = mostrarMenu();
            try {
                switch (opcion) {
                    case 1 -> gestionarClientes();
                    case 2 -> gestionarPedidos();
                    case 3 -> consultarZonasEnvio();
                    case 4 -> consultarPedidosCliente();
                    case 0 -> salir = true;
                    default -> mostrarError("Opción no válida");
                }
            } catch (Exception e) {
                mostrarError("Error: " + e.getMessage());
            }
        }
    }

    @Override
    public void mostrarMensaje(String mensaje) {
        System.out.println(mensaje);
    }

    @Override
    public void mostrarError(String mensaje) {
        System.err.println("ERROR: " + mensaje);
    }

    @Override
    public int mostrarMenu() {
        System.out.println("\n=== GESTIÓN DE PEDIDOS ===");
        System.out.println("1. Gestionar Clientes");
        System.out.println("2. Gestionar Pedidos");
        System.out.println("3. Consultar Zonas de Envío");
        System.out.println("4. Consultar Pedidos de Cliente");
        System.out.println("0. Salir");
        System.out.print("Seleccione una opción: ");
        return Integer.parseInt(scanner.nextLine());
    }

    @Override
    public void gestionarClientes() {
        boolean volver = false;
        while (!volver) {
            System.out.println("\n=== GESTIÓN DE CLIENTES ===");
            System.out.println("1. Nuevo Cliente");
            System.out.println("2. Modificar Cliente");
            System.out.println("3. Eliminar Cliente");
            System.out.println("4. Listar Clientes");
            System.out.println("0. Volver");
            System.out.print("Seleccione una opción: ");

            int opcion = Integer.parseInt(scanner.nextLine());
            try {
                switch (opcion) {
                    case 1 -> nuevoCliente();
                    case 2 -> modificarCliente();
                    case 3 -> eliminarCliente();
                    case 4 -> listarClientes();
                    case 0 -> volver = true;
                    default -> mostrarError("Opción no válida");
                }
            } catch (Exception e) {
                mostrarError("Error: " + e.getMessage());
            }
        }
    }

    private void nuevoCliente() throws Exception {
        System.out.println("\nNUEVO CLIENTE");
        System.out.print("Nombre: ");
        String nombre = scanner.nextLine();
        System.out.print("Email: ");
        String email = scanner.nextLine();
        System.out.print("Teléfono: ");
        String telefono = scanner.nextLine();

        // Mostrar zonas disponibles
        List<ZonaEnvio> zonas = zonaEnvioDAO.getAll();
        System.out.println("\nZonas disponibles:");
        for (ZonaEnvio zona : zonas) {
            System.out.println(zona.getIdZona() + ". " + zona.getNombreZona());
        }
        System.out.print("Seleccione zona: ");
        int idZona = Integer.parseInt(scanner.nextLine());

        Cliente cliente = new Cliente();
        cliente.setNombre(nombre);
        cliente.setEmail(email);
        cliente.setTelefono(telefono);
        cliente.setIdZona(idZona);

        clienteDAO.insert(cliente);
        mostrarMensaje("Cliente creado correctamente");
    }

    private void modificarCliente() throws Exception {
        listarClientes();
        System.out.print("\nID del cliente a modificar: ");
        int id = Integer.parseInt(scanner.nextLine());

        Cliente cliente = clienteDAO.getById(id);
        if (cliente == null) {
            mostrarError("Cliente no encontrado");
            return;
        }

        System.out.println("Deje en blanco para mantener el valor actual");

        System.out.print("Nombre [" + cliente.getNombre() + "]: ");
        String nombre = scanner.nextLine();
        if (!nombre.isEmpty())
            cliente.setNombre(nombre);

        System.out.print("Email [" + cliente.getEmail() + "]: ");
        String email = scanner.nextLine();
        if (!email.isEmpty())
            cliente.setEmail(email);

        System.out.print("Teléfono [" + cliente.getTelefono() + "]: ");
        String telefono = scanner.nextLine();
        if (!telefono.isEmpty())
            cliente.setTelefono(telefono);

        List<ZonaEnvio> zonas = zonaEnvioDAO.getAll();
        System.out.println("\nZonas disponibles:");
        for (ZonaEnvio zona : zonas) {
            System.out.println(zona.getIdZona() + ". " + zona.getNombreZona());
        }
        System.out.print("Nueva zona [" + cliente.getIdZona() + "]: ");
        String zonaStr = scanner.nextLine();
        if (!zonaStr.isEmpty()) {
            cliente.setIdZona(Integer.parseInt(zonaStr));
        }

        clienteDAO.update(cliente);
        mostrarMensaje("Cliente actualizado correctamente");
    }

    private void eliminarCliente() throws Exception {
        listarClientes();
        System.out.print("\nID del cliente a eliminar: ");
        int id = Integer.parseInt(scanner.nextLine());

        System.out.print("¿Está seguro de eliminar este cliente? (s/n): ");
        if (scanner.nextLine().toLowerCase().startsWith("s")) {
            clienteDAO.delete(id);
            mostrarMensaje("Cliente eliminado correctamente");
        }
    }

    private void listarClientes() throws Exception {
        List<Cliente> clientes = clienteDAO.getAll();
        System.out.println("\nLISTA DE CLIENTES");
        System.out.println("================");
        for (Cliente cliente : clientes) {
            System.out.printf("ID: %d | Nombre: %s | Email: %s | Teléfono: %s | Zona: %d%n",
                    cliente.getIdCliente(),
                    cliente.getNombre(),
                    cliente.getEmail(),
                    cliente.getTelefono(),
                    cliente.getIdZona());
        }
    }

    @Override
    public void gestionarPedidos() {
        boolean volver = false;
        while (!volver) {
            System.out.println("\n=== GESTIÓN DE PEDIDOS ===");
            System.out.println("1. Nuevo Pedido");
            System.out.println("2. Modificar Pedido");
            System.out.println("3. Eliminar Pedido");
            System.out.println("4. Listar Pedidos");
            System.out.println("0. Volver");
            System.out.print("Seleccione una opción: ");

            int opcion = Integer.parseInt(scanner.nextLine());
            try {
                switch (opcion) {
                    case 1 -> nuevoPedido();
                    case 2 -> modificarPedido();
                    case 3 -> eliminarPedido();
                    case 4 -> listarPedidos();
                    case 0 -> volver = true;
                    default -> mostrarError("Opción no válida");
                }
            } catch (Exception e) {
                mostrarError("Error: " + e.getMessage());
            }
        }
    }

    private void nuevoPedido() throws Exception {
        listarClientes();
        System.out.print("\nID del cliente: ");
        int idCliente = Integer.parseInt(scanner.nextLine());

        System.out.print("Fecha (dd/MM/yyyy): ");
        LocalDate fecha = LocalDate.parse(scanner.nextLine(), dateFormatter);

        System.out.print("Importe total: ");
        double importeTotal = Double.parseDouble(scanner.nextLine());

        Pedido pedido = new Pedido();
        pedido.setIdCliente(idCliente);
        pedido.setFecha(fecha);
        pedido.setImporteTotal(importeTotal);

        pedidoDAO.insert(pedido);
        mostrarMensaje("Pedido creado correctamente");
    }

    private void modificarPedido() throws Exception {
        listarPedidos();
        System.out.print("\nID del pedido a modificar: ");
        int id = Integer.parseInt(scanner.nextLine());

        Pedido pedido = pedidoDAO.getById(id);
        if (pedido == null) {
            mostrarError("Pedido no encontrado");
            return;
        }

        System.out.print("Nueva fecha [" + pedido.getFecha().format(dateFormatter) + "]: ");
        String fechaStr = scanner.nextLine();
        if (!fechaStr.isEmpty()) {
            pedido.setFecha(LocalDate.parse(fechaStr, dateFormatter));
        }

        System.out.print("Nuevo importe [" + pedido.getImporteTotal() + "]: ");
        String importeStr = scanner.nextLine();
        if (!importeStr.isEmpty()) {
            pedido.setImporteTotal(Double.parseDouble(importeStr));
        }

        pedidoDAO.update(pedido);
        mostrarMensaje("Pedido actualizado correctamente");
    }

    private void eliminarPedido() throws Exception {
        listarPedidos();
        System.out.print("\nID del pedido a eliminar: ");
        int id = Integer.parseInt(scanner.nextLine());

        System.out.print("¿Está seguro de eliminar este pedido? (s/n): ");
        if (scanner.nextLine().toLowerCase().startsWith("s")) {
            pedidoDAO.delete(id);
            mostrarMensaje("Pedido eliminado correctamente");
        }
    }

    private void listarPedidos() throws Exception {
        List<Pedido> pedidos = pedidoDAO.getAll();
        System.out.println("\nLISTA DE PEDIDOS");
        System.out.println("===============");
        for (Pedido pedido : pedidos) {
            System.out.printf("ID: %d | Cliente: %d | Fecha: %s | Importe: %.2f€%n",
                    pedido.getIdPedido(),
                    pedido.getIdCliente(),
                    pedido.getFecha().format(dateFormatter),
                    pedido.getImporteTotal());
        }
    }

    @Override
    public void consultarZonasEnvio() throws Exception {
        List<ZonaEnvio> zonas = zonaEnvioDAO.getAll();
        System.out.println("\nZONAS DE ENVÍO");
        System.out.println("=============");
        for (ZonaEnvio zona : zonas) {
            System.out.printf("ID: %d | Nombre: %s | Tarifa: %.2f€%n",
                    zona.getIdZona(),
                    zona.getNombreZona(),
                    zona.getTarifaEnvio());
        }
    }

    @Override
    public void consultarPedidosCliente() throws Exception {
        listarClientes();
        System.out.print("\nID del cliente: ");
        int idCliente = Integer.parseInt(scanner.nextLine());

        // Verificar si el cliente existe
        Cliente cliente = clienteDAO.getById(idCliente);
        if (cliente == null) {
            mostrarError("Cliente no encontrado");
            return;
        }

        List<Pedido> pedidos = pedidoDAO.getPedidosByCliente(idCliente);
        double totalGastado = pedidoDAO.getTotalPedidosByCliente(idCliente);

        System.out.println("\nPEDIDOS DEL CLIENTE");
        System.out.println("==================");
        for (Pedido pedido : pedidos) {
            System.out.printf("ID: %d | Fecha: %s | Importe: %.2f€%n",
                    pedido.getIdPedido(),
                    pedido.getFecha().format(dateFormatter),
                    pedido.getImporteTotal());
        }
        System.out.printf("\nTotal gastado: %.2f€%n", totalGastado);
    }
}

================
File: src/main/java/acceso/datos/ui/GraphicalUI.java
================
package acceso.datos.ui;

import acceso.datos.dao.interfaces.ClienteDAO;
import acceso.datos.dao.interfaces.PedidoDAO;
import acceso.datos.dao.interfaces.ZonaEnvioDAO;
import acceso.datos.model.Cliente;
import acceso.datos.model.Pedido;
import acceso.datos.model.ZonaEnvio;

import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.awt.GridLayout;

import java.sql.SQLException;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.List;

public class GraphicalUI implements UI {
    private SwingMenuBuilder gui;
    private final ClienteDAO clienteDAO;
    private final PedidoDAO pedidoDAO;
    private final ZonaEnvioDAO zonaEnvioDAO;
    private volatile int selectedOption = -1;
    private final Object lock = new Object();
    private static final DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern("dd/MM/yyyy");

    public GraphicalUI(ClienteDAO clienteDAO, PedidoDAO pedidoDAO, ZonaEnvioDAO zonaEnvioDAO) {
        this.clienteDAO = clienteDAO;
        this.pedidoDAO = pedidoDAO;
        this.zonaEnvioDAO = zonaEnvioDAO;
        this.gui = new SwingMenuBuilder("Sistema de Gestión de Pedidos");
        configureGUI();
    }

    private void configureGUI() {
        gui.addMenuOption("Gestionar Clientes", () -> {
            gui.setStatus(SwingMenuBuilder.STATUS_PROCESSING);
            synchronized (lock) {
                selectedOption = 1;
                lock.notify();
            }
        });

        gui.addMenuOption("Gestionar Pedidos", () -> {
            gui.setStatus(SwingMenuBuilder.STATUS_PROCESSING);
            synchronized (lock) {
                selectedOption = 2;
                lock.notify();
            }
        });

        gui.addMenuOption("Consultar Zonas de Envío", () -> {
            gui.setStatus(SwingMenuBuilder.STATUS_PROCESSING);
            synchronized (lock) {
                selectedOption = 3;
                lock.notify();
            }
        });

        gui.addMenuOption("Consultar Pedidos de Cliente", () -> {
            gui.setStatus(SwingMenuBuilder.STATUS_PROCESSING);
            synchronized (lock) {
                selectedOption = 4;
                lock.notify();
            }
        });

        gui.addMenuOption("Salir", () -> {
            gui.setStatus(SwingMenuBuilder.STATUS_CLOSING);
            synchronized (lock) {
                selectedOption = 0;
                lock.notify();
            }
        });
    }

    @Override
    public void iniciar() {
        SwingUtilities.invokeLater(() -> {
            gui.setStatus(SwingMenuBuilder.STATUS_READY);
            gui.displayGUI();
        });

        boolean continuar = true;
        while (continuar) {
            int opcion = mostrarMenu();
            try {
                switch (opcion) {
                    case 1 -> gestionarClientes();
                    case 2 -> gestionarPedidos();
                    case 3 -> consultarZonasEnvio();
                    case 4 -> consultarPedidosCliente();
                    case 0 -> continuar = false;
                    default -> mostrarError("Opción no válida");
                }
            } catch (Exception e) {
                mostrarError("Error: " + e.getMessage());
            }
        }
    }

    @Override
    public int mostrarMenu() {
        synchronized (lock) {
            selectedOption = -1;
            try {
                lock.wait();
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
            return selectedOption;
        }
    }

    @Override
    public void mostrarMensaje(String mensaje) {
        SwingUtilities.invokeLater(() -> {
            SwingMenuBuilder.showMessageDialog(mensaje);
            gui.setStatus(SwingMenuBuilder.STATUS_READY);
        });
    }

    @Override
    public void mostrarError(String mensaje) {
        SwingUtilities.invokeLater(() -> {
            SwingMenuBuilder.showErrorDialog(mensaje);
            gui.setStatus(SwingMenuBuilder.STATUS_READY);
        });
    }

    @Override
    public void gestionarClientes() {
        JPanel panel = new JPanel(new GridLayout(5, 1, 5, 5));
        panel.setBorder(new EmptyBorder(10, 10, 10, 10));

        JButton nuevoButton = new JButton("Nuevo Cliente");
        JButton modificarButton = new JButton("Modificar Cliente");
        JButton eliminarButton = new JButton("Eliminar Cliente");
        JButton listarButton = new JButton("Listar Clientes");
        JButton volverButton = new JButton("Volver");

        panel.add(nuevoButton);
        panel.add(modificarButton);
        panel.add(eliminarButton);
        panel.add(listarButton);
        panel.add(volverButton);

        JDialog dialog = new JDialog(gui, "Gestión de Clientes", true);
        dialog.setContentPane(panel);
        dialog.pack();
        dialog.setLocationRelativeTo(gui);

        nuevoButton.addActionListener(e -> {
            dialog.setVisible(false);
            nuevoCliente();
        });

        modificarButton.addActionListener(e -> {
            dialog.setVisible(false);
            modificarCliente();
        });

        eliminarButton.addActionListener(e -> {
            dialog.setVisible(false);
            eliminarCliente();
        });

        listarButton.addActionListener(e -> {
            dialog.setVisible(false);
            listarClientes();
        });

        volverButton.addActionListener(e -> dialog.dispose());

        dialog.setVisible(true);
    }

    private void nuevoCliente() {
        JPanel panel = new JPanel(new GridLayout(5, 2, 5, 5));
        panel.setBorder(new EmptyBorder(10, 10, 10, 10));

        panel.add(new JLabel("Nombre:"));
        JTextField nombreField = new JTextField();
        panel.add(nombreField);

        panel.add(new JLabel("Email:"));
        JTextField emailField = new JTextField();
        panel.add(emailField);

        panel.add(new JLabel("Teléfono:"));
        JTextField telefonoField = new JTextField();
        panel.add(telefonoField);

        panel.add(new JLabel("Zona:"));
        JComboBox<ZonaEnvio> zonaCombo = new JComboBox<>();
        try {
            List<ZonaEnvio> zonas = zonaEnvioDAO.getAll();
            for (ZonaEnvio zona : zonas) {
                zonaCombo.addItem(zona);
            }
        } catch (SQLException ex) {
            mostrarError("Error al cargar las zonas: " + ex.getMessage());
            return;
        }
        panel.add(zonaCombo);

        int result = JOptionPane.showConfirmDialog(gui, panel, "Nuevo Cliente",
                JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        if (result == JOptionPane.OK_OPTION) {
            try {
                Cliente cliente = new Cliente();
                cliente.setNombre(nombreField.getText());
                cliente.setEmail(emailField.getText());
                cliente.setTelefono(telefonoField.getText());
                cliente.setIdZona(((ZonaEnvio) zonaCombo.getSelectedItem()).getIdZona());

                clienteDAO.insert(cliente);
                mostrarMensaje("Cliente creado correctamente");
            } catch (SQLException ex) {
                mostrarError("Error al crear el cliente: " + ex.getMessage());
            }
        }
    }

    private void modificarCliente() {
        // Primero seleccionar el cliente a modificar
        JComboBox<Cliente> clienteCombo = new JComboBox<>();
        try {
            List<Cliente> clientes = clienteDAO.getAll();
            for (Cliente cliente : clientes) {
                clienteCombo.addItem(cliente);
            }
        } catch (SQLException ex) {
            mostrarError("Error al cargar los clientes: " + ex.getMessage());
            return;
        }

        int seleccion = JOptionPane.showConfirmDialog(gui, clienteCombo, "Seleccione Cliente",
                JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        if (seleccion == JOptionPane.OK_OPTION) {
            Cliente clienteSeleccionado = (Cliente) clienteCombo.getSelectedItem();

            JPanel panel = new JPanel(new GridLayout(5, 2, 5, 5));
            panel.setBorder(new EmptyBorder(10, 10, 10, 10));

            panel.add(new JLabel("Nombre:"));
            JTextField nombreField = new JTextField(clienteSeleccionado.getNombre());
            panel.add(nombreField);

            panel.add(new JLabel("Email:"));
            JTextField emailField = new JTextField(clienteSeleccionado.getEmail());
            panel.add(emailField);

            panel.add(new JLabel("Teléfono:"));
            JTextField telefonoField = new JTextField(clienteSeleccionado.getTelefono());
            panel.add(telefonoField);

            panel.add(new JLabel("Zona:"));
            JComboBox<ZonaEnvio> zonaCombo = new JComboBox<>();
            try {
                List<ZonaEnvio> zonas = zonaEnvioDAO.getAll();
                for (ZonaEnvio zona : zonas) {
                    zonaCombo.addItem(zona);
                    if (zona.getIdZona() == clienteSeleccionado.getIdZona()) {
                        zonaCombo.setSelectedItem(zona);
                    }
                }
            } catch (SQLException ex) {
                mostrarError("Error al cargar las zonas: " + ex.getMessage());
                return;
            }
            panel.add(zonaCombo);

            int result = JOptionPane.showConfirmDialog(gui, panel, "Modificar Cliente",
                    JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

            if (result == JOptionPane.OK_OPTION) {
                try {
                    clienteSeleccionado.setNombre(nombreField.getText());
                    clienteSeleccionado.setEmail(emailField.getText());
                    clienteSeleccionado.setTelefono(telefonoField.getText());
                    clienteSeleccionado.setIdZona(((ZonaEnvio) zonaCombo.getSelectedItem()).getIdZona());

                    clienteDAO.update(clienteSeleccionado);
                    mostrarMensaje("Cliente modificado correctamente");
                } catch (SQLException ex) {
                    mostrarError("Error al modificar el cliente: " + ex.getMessage());
                }
            }
        }
    }

    private void eliminarCliente() {
        JComboBox<Cliente> clienteCombo = new JComboBox<>();
        try {
            List<Cliente> clientes = clienteDAO.getAll();
            for (Cliente cliente : clientes) {
                clienteCombo.addItem(cliente);
            }
        } catch (SQLException ex) {
            mostrarError("Error al cargar los clientes: " + ex.getMessage());
            return;
        }

        int seleccion = JOptionPane.showConfirmDialog(gui, clienteCombo, "Seleccione Cliente a Eliminar",
                JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        if (seleccion == JOptionPane.OK_OPTION) {
            Cliente clienteSeleccionado = (Cliente) clienteCombo.getSelectedItem();

            int confirmacion = JOptionPane.showConfirmDialog(gui,
                    "¿Está seguro de eliminar al cliente " + clienteSeleccionado.getNombre() + "?",
                    "Confirmar Eliminación",
                    JOptionPane.YES_NO_OPTION);

            if (confirmacion == JOptionPane.YES_OPTION) {
                try {
                    clienteDAO.delete(clienteSeleccionado.getIdCliente());
                    mostrarMensaje("Cliente eliminado correctamente");
                } catch (SQLException ex) {
                    mostrarError("Error al eliminar el cliente: " + ex.getMessage());
                }
            }
        }
    }

    private void listarClientes() {
        try {
            List<Cliente> clientes = clienteDAO.getAll();
            StringBuilder sb = new StringBuilder();
            sb.append("LISTADO DE CLIENTES\n");
            sb.append("===================\n\n");

            for (Cliente cliente : clientes) {
                sb.append(String.format("ID: %d\n", cliente.getIdCliente()));
                sb.append(String.format("Nombre: %s\n", cliente.getNombre()));
                sb.append(String.format("Email: %s\n", cliente.getEmail()));
                sb.append(String.format("Teléfono: %s\n", cliente.getTelefono()));
                sb.append(String.format("Zona: %d\n", cliente.getIdZona()));
                sb.append("-------------------\n");
            }

            SwingMenuBuilder.showLongTextDialog("Listado de Clientes", sb.toString());
        } catch (SQLException ex) {
            mostrarError("Error al listar los clientes: " + ex.getMessage());
        }
    }

    @Override
    public void gestionarPedidos() {
        JPanel panel = new JPanel(new GridLayout(5, 1, 5, 5));
        panel.setBorder(new EmptyBorder(10, 10, 10, 10));

        JButton nuevoButton = new JButton("Nuevo Pedido");
        JButton modificarButton = new JButton("Modificar Pedido");
        JButton eliminarButton = new JButton("Eliminar Pedido");
        JButton listarButton = new JButton("Listar Pedidos");
        JButton volverButton = new JButton("Volver");

        panel.add(nuevoButton);
        panel.add(modificarButton);
        panel.add(eliminarButton);
        panel.add(listarButton);
        panel.add(volverButton);

        JDialog dialog = new JDialog(gui, "Gestión de Pedidos", true);
        dialog.setContentPane(panel);
        dialog.pack();
        dialog.setLocationRelativeTo(gui);

        nuevoButton.addActionListener(e -> {
            dialog.setVisible(false);
            nuevoPedido();
        });

        modificarButton.addActionListener(e -> {
            dialog.setVisible(false);
            modificarPedido();
        });

        eliminarButton.addActionListener(e -> {
            dialog.setVisible(false);
            eliminarPedido();
        });

        listarButton.addActionListener(e -> {
            dialog.setVisible(false);
            listarPedidos();
        });

        volverButton.addActionListener(e -> dialog.dispose());

        dialog.setVisible(true);
    }

    private void nuevoPedido() {
        JPanel panel = new JPanel(new GridLayout(4, 2, 5, 5));
        panel.setBorder(new EmptyBorder(10, 10, 10, 10));

        panel.add(new JLabel("Cliente:"));
        JComboBox<Cliente> clienteCombo = new JComboBox<>();
        try {
            List<Cliente> clientes = clienteDAO.getAll();
            for (Cliente cliente : clientes) {
                clienteCombo.addItem(cliente);
            }
        } catch (SQLException ex) {
            mostrarError("Error al cargar los clientes: " + ex.getMessage());
            return;
        }
        panel.add(clienteCombo);

        panel.add(new JLabel("Fecha (dd/MM/yyyy):"));
        JTextField fechaField = new JTextField(LocalDate.now().format(dateFormatter));
        panel.add(fechaField);

        panel.add(new JLabel("Importe Total:"));
        JTextField importeField = new JTextField();
        panel.add(importeField);

        int result = JOptionPane.showConfirmDialog(gui, panel, "Nuevo Pedido",
                JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        if (result == JOptionPane.OK_OPTION) {
            try {
                Pedido pedido = new Pedido();
                pedido.setIdCliente(((Cliente) clienteCombo.getSelectedItem()).getIdCliente());
                pedido.setFecha(LocalDate.parse(fechaField.getText(), dateFormatter));
                pedido.setImporteTotal(Double.parseDouble(importeField.getText()));

                pedidoDAO.insert(pedido);
                mostrarMensaje("Pedido creado correctamente");
            } catch (SQLException ex) {
                mostrarError("Error al crear el pedido: " + ex.getMessage());
            } catch (Exception ex) {
                mostrarError("Error en los datos introducidos: " + ex.getMessage());
            }
        }
    }

    private void modificarPedido() {
        JComboBox<Pedido> pedidoCombo = new JComboBox<>();
        try {
            List<Pedido> pedidos = pedidoDAO.getAll();
            for (Pedido pedido : pedidos) {
                pedidoCombo.addItem(pedido);
            }
        } catch (SQLException ex) {
            mostrarError("Error al cargar los pedidos: " + ex.getMessage());
            return;
        }

        int seleccion = JOptionPane.showConfirmDialog(gui, pedidoCombo, "Seleccione Pedido",
                JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        if (seleccion == JOptionPane.OK_OPTION) {
            Pedido pedidoSeleccionado = (Pedido) pedidoCombo.getSelectedItem();

            JPanel panel = new JPanel(new GridLayout(3, 2, 5, 5));
            panel.setBorder(new EmptyBorder(10, 10, 10, 10));

            panel.add(new JLabel("Fecha (dd/MM/yyyy):"));
            JTextField fechaField = new JTextField(pedidoSeleccionado.getFecha().format(dateFormatter));
            panel.add(fechaField);

            panel.add(new JLabel("Importe Total:"));
            JTextField importeField = new JTextField(String.valueOf(pedidoSeleccionado.getImporteTotal()));
            panel.add(importeField);

            int result = JOptionPane.showConfirmDialog(gui, panel, "Modificar Pedido",
                    JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

            if (result == JOptionPane.OK_OPTION) {
                try {
                    pedidoSeleccionado.setFecha(LocalDate.parse(fechaField.getText(), dateFormatter));
                    pedidoSeleccionado.setImporteTotal(Double.parseDouble(importeField.getText()));

                    pedidoDAO.update(pedidoSeleccionado);
                    mostrarMensaje("Pedido modificado correctamente");
                } catch (SQLException ex) {
                    mostrarError("Error al modificar el pedido: " + ex.getMessage());
                } catch (Exception ex) {
                    mostrarError("Error en los datos introducidos: " + ex.getMessage());
                }
            }
        }
    }

    private void eliminarPedido() {
        JComboBox<Pedido> pedidoCombo = new JComboBox<>();
        try {
            List<Pedido> pedidos = pedidoDAO.getAll();
            for (Pedido pedido : pedidos) {
                pedidoCombo.addItem(pedido);
            }
        } catch (SQLException ex) {
            mostrarError("Error al cargar los pedidos: " + ex.getMessage());
            return;
        }

        int seleccion = JOptionPane.showConfirmDialog(gui, pedidoCombo, "Seleccione Pedido a Eliminar",
                JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        if (seleccion == JOptionPane.OK_OPTION) {
            Pedido pedidoSeleccionado = (Pedido) pedidoCombo.getSelectedItem();

            int confirmacion = JOptionPane.showConfirmDialog(gui,
                    "¿Está seguro de eliminar el pedido ID: " + pedidoSeleccionado.getIdPedido() + "?",
                    "Confirmar Eliminación",
                    JOptionPane.YES_NO_OPTION);

            if (confirmacion == JOptionPane.YES_OPTION) {
                try {
                    pedidoDAO.delete(pedidoSeleccionado.getIdPedido());
                    mostrarMensaje("Pedido eliminado correctamente");
                } catch (SQLException ex) {
                    mostrarError("Error al eliminar el pedido: " + ex.getMessage());
                }
            }
        }
    }

    private void listarPedidos() {
        try {
            List<Pedido> pedidos = pedidoDAO.getAll();
            StringBuilder sb = new StringBuilder();
            sb.append("LISTADO DE PEDIDOS\n");
            sb.append("==================\n\n");

            for (Pedido pedido : pedidos) {
                sb.append(String.format("ID: %d\n", pedido.getIdPedido()));
                sb.append(String.format("Cliente: %d\n", pedido.getIdCliente()));
                sb.append(String.format("Fecha: %s\n", pedido.getFecha().format(dateFormatter)));
                sb.append(String.format("Importe: %.2f€\n", pedido.getImporteTotal()));
                sb.append("-------------------\n");
            }

            SwingMenuBuilder.showLongTextDialog("Listado de Pedidos", sb.toString());
        } catch (SQLException ex) {
            mostrarError("Error al listar los pedidos: " + ex.getMessage());
        }
    }

    // En GraphicalUI.java

    @Override
    public void consultarZonasEnvio() throws SQLException {
        try {
            List<ZonaEnvio> zonas = zonaEnvioDAO.getAll();
            StringBuilder sb = new StringBuilder();
            sb.append("ZONAS DE ENVÍO\n");
            sb.append("==============\n\n");

            for (ZonaEnvio zona : zonas) {
                sb.append(String.format("ID: %d\n", zona.getIdZona()));
                sb.append(String.format("Nombre: %s\n", zona.getNombreZona()));
                sb.append(String.format("Tarifa: %.2f€\n", zona.getTarifaEnvio()));

                // Obtener y mostrar clientes en esta zona
                List<Cliente> clientesZona = clienteDAO.getClientesByZona(zona.getIdZona());
                if (!clientesZona.isEmpty()) {
                    sb.append("Clientes en esta zona:\n");
                    for (Cliente cliente : clientesZona) {
                        sb.append(String.format("  - %s\n", cliente.getNombre()));
                    }
                }

                sb.append("-------------------\n");
            }

            SwingMenuBuilder.showLongTextDialog("Zonas de Envío", sb.toString());
        } catch (SQLException ex) {
            mostrarError("Error al consultar las zonas de envío: " + ex.getMessage());
        }
    }

    @Override
    public void consultarPedidosCliente() throws SQLException {
        // Primero seleccionar el cliente
        JComboBox<Cliente> clienteCombo = new JComboBox<>();
        try {
            List<Cliente> clientes = clienteDAO.getAll();
            for (Cliente cliente : clientes) {
                clienteCombo.addItem(cliente);
            }
        } catch (SQLException ex) {
            mostrarError("Error al cargar los clientes: " + ex.getMessage());
            return;
        }

        int seleccion = JOptionPane.showConfirmDialog(gui, clienteCombo,
                "Seleccione Cliente para ver sus pedidos",
                JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        if (seleccion == JOptionPane.OK_OPTION) {
            Cliente clienteSeleccionado = (Cliente) clienteCombo.getSelectedItem();

            try {
                List<Pedido> pedidos = pedidoDAO.getPedidosByCliente(clienteSeleccionado.getIdCliente());
                double totalGastado = pedidoDAO.getTotalPedidosByCliente(clienteSeleccionado.getIdCliente());

                StringBuilder sb = new StringBuilder();
                sb.append(String.format("PEDIDOS DE %s\n", clienteSeleccionado.getNombre().toUpperCase()));
                sb.append("=======================\n\n");

                if (pedidos.isEmpty()) {
                    sb.append("Este cliente no tiene pedidos registrados.\n");
                } else {
                    for (Pedido pedido : pedidos) {
                        sb.append(String.format("ID Pedido: %d\n", pedido.getIdPedido()));
                        sb.append(String.format("Fecha: %s\n", pedido.getFecha().format(dateFormatter)));
                        sb.append(String.format("Importe: %.2f€\n", pedido.getImporteTotal()));
                        sb.append("-------------------\n");
                    }

                    sb.append("\nRESUMEN DEL CLIENTE\n");
                    sb.append("==================\n");
                    sb.append(String.format("Total de pedidos: %d\n", pedidos.size()));
                    sb.append(String.format("Importe total gastado: %.2f€\n", totalGastado));

                    // Obtener y mostrar información de la zona del cliente
                    ZonaEnvio zona = zonaEnvioDAO.getById(clienteSeleccionado.getIdZona());
                    if (zona != null) {
                        sb.append(String.format("Zona de envío: %s\n", zona.getNombreZona()));
                        sb.append(String.format("Tarifa de envío: %.2f€\n", zona.getTarifaEnvio()));
                    }
                }

                SwingMenuBuilder.showLongTextDialog(
                        "Consulta de Pedidos - " + clienteSeleccionado.getNombre(),
                        sb.toString());

            } catch (SQLException ex) {
                mostrarError("Error al consultar los pedidos: " + ex.getMessage());
            }
        }
    }

    // Método auxiliar para formatear moneda
    private String formatMoney(double amount) {
        return String.format("%.2f€", amount);
    }

    // Método auxiliar para formatear fecha
    private String formatDate(LocalDate date) {
        return date.format(dateFormatter);
    }
}

================
File: src/main/java/acceso/datos/ui/SwingMenuBuilder.java
================
package acceso.datos.ui;

import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.awt.*;

public class SwingMenuBuilder extends JFrame {
    private JPanel buttonPanel;
    private JLabel statusLabel;

    public static final String STATUS_READY = "Listo";
    public static final String STATUS_PROCESSING = "Procesando...";
    public static final String STATUS_CLOSING = "Cerrando...";
    public static final String STATUS_ERROR = "Error";

    public SwingMenuBuilder(String title) {
        super(title);
        initComponents();
    }

    private void initComponents() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(600, 400);
        setLocationRelativeTo(null);

        // Panel principal
        JPanel mainPanel = new JPanel(new BorderLayout());
        mainPanel.setBorder(new EmptyBorder(10, 10, 10, 10));

        // Panel de título
        JPanel titlePanel = new JPanel();
        JLabel titleLabel = new JLabel("Sistema de Gestión de Pedidos");
        titleLabel.setFont(new Font("Arial", Font.BOLD, 20));
        titlePanel.add(titleLabel);
        mainPanel.add(titlePanel, BorderLayout.NORTH);

        // Panel de botones
        buttonPanel = new JPanel();
        buttonPanel.setLayout(new BoxLayout(buttonPanel, BoxLayout.Y_AXIS));
        buttonPanel.setBorder(new EmptyBorder(20, 0, 20, 0));

        JScrollPane scrollPane = new JScrollPane(buttonPanel);
        scrollPane.setBorder(null);
        mainPanel.add(scrollPane, BorderLayout.CENTER);

        // Panel de estado
        JPanel statusPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        statusLabel = new JLabel(STATUS_READY);
        statusLabel.setFont(new Font("Arial", Font.PLAIN, 12));
        statusPanel.add(statusLabel);
        mainPanel.add(statusPanel, BorderLayout.SOUTH);

        add(mainPanel);
    }

    public void setStatus(String status) {
        if (SwingUtilities.isEventDispatchThread()) {
            statusLabel.setText(status);
        } else {
            SwingUtilities.invokeLater(() -> statusLabel.setText(status));
        }
    }

    public void addMenuOption(String text, Runnable action) {
        JButton button = new JButton(text);
        button.setMaximumSize(new Dimension(Integer.MAX_VALUE, 40));
        button.setAlignmentX(Component.CENTER_ALIGNMENT);
        button.setFont(new Font("Arial", Font.PLAIN, 14));
        button.setFocusPainted(false);
        button.setMargin(new Insets(10, 20, 10, 20));

        button.addActionListener(e -> {
            if (action != null) {
                action.run();
            }
        });

        buttonPanel.add(Box.createRigidArea(new Dimension(0, 10)));
        buttonPanel.add(button);
        buttonPanel.revalidate();
        buttonPanel.repaint();
    }

    public static void showMessageDialog(String message) {
        JOptionPane.showMessageDialog(null, message, "Información", JOptionPane.INFORMATION_MESSAGE);
    }

    public static void showErrorDialog(String message) {
        JOptionPane.showMessageDialog(null, message, "Error", JOptionPane.ERROR_MESSAGE);
    }

    public static String showInputDialog(String message) {
        return JOptionPane.showInputDialog(null, message);
    }

    public static int showConfirmDialog(String message) {
        return JOptionPane.showConfirmDialog(null, message, "Confirmar", 
                JOptionPane.YES_NO_OPTION);
    }

    public static void showLongTextDialog(String title, String message) {
        JTextArea textArea = new JTextArea(message);
        textArea.setEditable(false);
        textArea.setLineWrap(true);
        textArea.setWrapStyleWord(true);
        JScrollPane scrollPane = new JScrollPane(textArea);
        scrollPane.setPreferredSize(new Dimension(500, 300));
        JOptionPane.showMessageDialog(null, scrollPane, title, JOptionPane.INFORMATION_MESSAGE);
    }

    public void displayGUI() {
        setVisible(true);
    }
}

================
File: src/main/java/acceso/datos/ui/UI.java
================
package acceso.datos.ui;

/**
 * Interfaz que define los métodos necesarios para la interacción con el usuario
 */
public interface UI {
    /**
     * Inicia la interfaz de usuario y muestra el menú principal
     */
    void iniciar();

    /**
     * Muestra un mensaje informativo al usuario
     * @param mensaje El mensaje a mostrar
     */
    void mostrarMensaje(String mensaje);

    /**
     * Muestra un mensaje de error al usuario
     * @param mensaje El mensaje de error a mostrar
     */
    void mostrarError(String mensaje);

    /**
     * Muestra el menú principal y obtiene la selección del usuario
     * @return La opción seleccionada por el usuario
     */
    int mostrarMenu();

    /**
     * Gestiona todas las operaciones relacionadas con clientes
     * (crear, modificar, eliminar, listar)
     */
    void gestionarClientes();

    /**
     * Gestiona todas las operaciones relacionadas con pedidos
     * (crear, modificar, eliminar, listar)
     */
    void gestionarPedidos();

    /**
     * Muestra información sobre las zonas de envío disponibles
     */
    void consultarZonasEnvio() throws Exception;

    /**
     * Consulta y muestra los pedidos de un cliente específico
     */
    void consultarPedidosCliente() throws Exception;
}

================
File: src/main/java/acceso/datos/util/DatabaseException.java
================
package acceso.datos.util;

public class DatabaseException extends RuntimeException {
    public DatabaseException(String message) {
        super(message);
    }

    public DatabaseException(String message, Throwable cause) {
        super(message, cause);
    }

    public DatabaseException(Throwable cause) {
        super(cause);
    }
}

================
File: src/main/java/acceso/datos/util/QueryUtils.java
================
package acceso.datos.util;

public class QueryUtils {
    // Consultas para ZonaEnvio
    public static final String INSERT_ZONA = 
        "INSERT INTO Zonas_Envio (nombre_zona, tarifa_envio) VALUES (?, ?)";
    public static final String SELECT_ZONA_BY_ID = 
        "SELECT * FROM Zonas_Envio WHERE id_zona = ?";
    public static final String SELECT_ALL_ZONAS = 
        "SELECT * FROM Zonas_Envio";
    public static final String UPDATE_ZONA = 
        "UPDATE Zonas_Envio SET nombre_zona = ?, tarifa_envio = ? WHERE id_zona = ?";
    public static final String DELETE_ZONA = 
        "DELETE FROM Zonas_Envio WHERE id_zona = ?";

    // Consultas para Cliente
    public static final String INSERT_CLIENTE = 
        "INSERT INTO Clientes (nombre, email, telefono, id_zona) VALUES (?, ?, ?, ?)";
    public static final String SELECT_CLIENTE_BY_ID = 
        "SELECT * FROM Clientes WHERE id_cliente = ?";
    public static final String SELECT_ALL_CLIENTES = 
        "SELECT * FROM Clientes";
    public static final String UPDATE_CLIENTE = 
        "UPDATE Clientes SET nombre = ?, email = ?, telefono = ?, id_zona = ? WHERE id_cliente = ?";
    public static final String DELETE_CLIENTE = 
        "DELETE FROM Clientes WHERE id_cliente = ?";
    public static final String SELECT_CLIENTES_BY_ZONA = 
        "SELECT * FROM Clientes WHERE id_zona = ?";
    public static final String SELECT_TOTAL_CLIENTE = 
        "SELECT SUM(importe_total) as total FROM Pedidos WHERE id_cliente = ?";

    // Consultas para Pedido
    public static final String INSERT_PEDIDO = 
        "INSERT INTO Pedidos (fecha, importe_total, id_cliente) VALUES (?, ?, ?)";
    public static final String SELECT_PEDIDO_BY_ID = 
        "SELECT * FROM Pedidos WHERE id_pedido = ?";
    public static final String SELECT_ALL_PEDIDOS = 
        "SELECT * FROM Pedidos";
    public static final String UPDATE_PEDIDO = 
        "UPDATE Pedidos SET fecha = ?, importe_total = ?, id_cliente = ? WHERE id_pedido = ?";
    public static final String DELETE_PEDIDO = 
        "DELETE FROM Pedidos WHERE id_pedido = ?";
    public static final String SELECT_PEDIDOS_BY_CLIENTE = 
        "SELECT * FROM Pedidos WHERE id_cliente = ?";
    public static final String SELECT_PEDIDOS_BY_FECHA = 
        "SELECT * FROM Pedidos WHERE fecha = ?";
}

================
File: src/main/java/acceso/datos/Main.java
================
package acceso.datos;

import acceso.datos.config.DatabaseConfig;
import acceso.datos.config.DatabaseConfigFactory;
import acceso.datos.config.DatabaseProperties;
import acceso.datos.config.DatabaseType;
import acceso.datos.dao.interfaces.ClienteDAO;
import acceso.datos.dao.interfaces.PedidoDAO;
import acceso.datos.dao.interfaces.ZonaEnvioDAO;
import acceso.datos.factory.DAOFactory;
import acceso.datos.ui.ConsoleUI;
import acceso.datos.ui.GraphicalUI;
import acceso.datos.ui.UI;

import org.apache.commons.cli.*;

public class Main {
    public static void main(String[] args) {
        Options options = new Options();
        options.addOption("i", "interfaz", true, "Interfaz a usar (consola/grafica)");
        
        CommandLineParser parser = new DefaultParser();
        try {
            CommandLine cmd = parser.parse(options, args);
            
            // Obtener la interfaz seleccionada
            String interfaz = cmd.getOptionValue("i", "consola");
            
            // Configuración de base de datos
            DatabaseProperties properties = new DatabaseProperties.Builder()
                .url("src/main/resources/pedidos.db")
                .maxPoolSize(5)
                .build();
            
            DatabaseConfig databaseConfig = DatabaseConfigFactory.createConfig(DatabaseType.SQLITE, properties);

            DAOFactory daoFactory = DAOFactory.getDAOFactory(DatabaseType.SQLITE, databaseConfig);

            ClienteDAO clienteDAO = daoFactory.createClienteDAO();
            PedidoDAO pedidoDAO = daoFactory.createPedidoDAO();
            ZonaEnvioDAO zonaEnvioDAO = daoFactory.createZonaEnvioDAO();

            // Seleccionar interfaz
            UI ui;
            if ("grafica".equalsIgnoreCase(interfaz)) {
                ui = new GraphicalUI(clienteDAO, pedidoDAO, zonaEnvioDAO);
            } else {
                ui = new ConsoleUI(clienteDAO, pedidoDAO, zonaEnvioDAO);
            }

            ui.iniciar();

        } catch (ParseException e) {
            System.err.println("Error al parsear argumentos: " + e.getMessage());
        } catch (Exception e) {
            System.err.println("Error fatal: " + e.getMessage());
            e.printStackTrace();
        }
    }
}

================
File: src/main/resources/pedidos.sql
================
-- Esquema de pedidos.
CREATE TABLE Zonas_Envio (
    id_zona INTEGER PRIMARY KEY /* GENERATED BY DEFAULT AS IDENTITY */,
    nombre_zona VARCHAR(100) NOT NULL,
    tarifa_envio DECIMAL(10, 2) NOT NULL
);

CREATE TABLE Clientes (
    id_cliente INTEGER PRIMARY KEY /* GENERATED BY DEFAULT AS IDENTITY */,
    nombre VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL,
    telefono CHAR(15),
    id_zona INTEGER NOT NULL,

    CONSTRAINT fk_cli_zon FOREIGN KEY (id_zona) REFERENCES Zonas_Envio(id_zona)
      ON DELETE SET NULL
      ON UPDATE CASCADE
);

CREATE TABLE Pedidos (
    id_pedido INTEGER PRIMARY KEY /* GENERATED BY DEFAULT AS IDENTITY */,
    fecha DATE NOT NULL,
    importe_total DECIMAL(10, 2) NOT NULL,
    id_cliente INTEGER NOT NULL,
    FOREIGN KEY (id_cliente) REFERENCES Clientes(id_cliente)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);

-- Algunos zonas preexistentes.
INSERT INTO Zonas_Envio (id_zona, nombre_zona, tarifa_envio) VALUES
    (1, 'Norte', 5.00),
    (2, 'Sur', 7.50);

-- Algunos clientes preexistentes.
INSERT INTO Clientes (id_cliente, nombre, email, telefono, id_zona) VALUES
    (1, 'Ana López', 'ana.lopez@example.com', '600123456', 1),
    (2, 'Carlos Pérez', 'carlos.perez@example.com', '610654321', 2),
    (3, 'Beatriz Gómez', 'beatriz.gomez@example.com', '620987654', 1),
    (4, 'David Martín', 'david.martin@example.com', '630321789', 2);

================
File: pom.xml
================
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>acceso.datos</groupId>
    <artifactId>tarea4_1</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
    </properties>



    <dependencies>

        <dependency>
            <groupId>org.xerial</groupId>
            <artifactId>sqlite-jdbc</artifactId>
            <version>3.48.0.0</version>
        </dependency>
        <dependency>
            <groupId>com.zaxxer</groupId>
            <artifactId>HikariCP</artifactId>
            <version>6.2.1</version>
        </dependency>
        <dependency>
            <groupId>commons-cli</groupId>
            <artifactId>commons-cli</artifactId>
            <version>1.5.0</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.7.32</version>
        </dependency>
    </dependencies>
</project>
